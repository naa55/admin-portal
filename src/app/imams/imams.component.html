<app-alert #alert></app-alert>
<div class="d-flex justify-content-end mx-3">

    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleLargeModal"
        (click)="open(ImamModal)">
        Add A Priest
    </button>
</div>
<div class="card mt-2">
    <div class="card-body">
        <div class="d-lg-flex align-items-center mb-4 gap-3">
            <div class="position-relative">
                <input type="text" class="form-control ps-5 radius-10" [(ngModel)]="name" placeholder="Officers Name" 
                   />
              </div>
              <div class="position-relative">
                <input type="text" class="form-control ps-5 radius-10" [(ngModel)]="district" placeholder="District"/>
              </div>
              <div>
                <button type="submit" (click)="searchMarriage()" class="btn btn-primary">Search</button>
              </div>
        </div>
        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Officer Name</th>
                        <th>License Number</th>
                        <th>License Date</th>
                        <th>Town</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="
              let item of ImamList
                | paginate : { itemsPerPage: 10, currentPage: p }
            ">
                        <!-- <td>{{ item.lawyer_name }}</td> -->

                        <td>
                            <span>{{ item.officer_name }}</span>
                        </td>
                        <td>{{ item?.license_number }}</td>
                        <td>{{ item?.license_date }}</td>
                        <td>{{ item?.town }}</td>
                        <td>
                            <div class="dropdown">
                                <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    Action
                                </button>
                                <ul class="dropdown-menu">
                                    <li (click)="edit(item?.id, ImamModal)" class="dropdown-item" data-bs-toggle="modal"
                                        data-bs-target="#exampleLargeModal">
                                        Edit
                                    </li>
                                    <!-- <li (click)="view(item)" class="dropdown-item">View</li> -->
                                    <li (click)="deleteFromList(item)" class="dropdown-item">
                                        Delete
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div style="float: right; margin-bottom: 50px">
    <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>

<ng-template #ImamModal let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h5 class="modal-title">Add Priests</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="close()"></button>
    </div>
    <div class="modal-body">
        <form class="my-4" [formGroup]="Imamform">
            <div class="row">
                <div class="col-sm-12">
                    <label class="form-label">Name</label>
                    <input type="text" formControlName="name" class="form-control form-control-lg" />
                </div>
                <div class="col-sm-12">
                    <label class="form-label">License Number</label>
                    <input type="text" formControlName="license_number" class="form-control form-control-lg" />
                </div>
                <div class="col-md-6 col-sm-12">
                    <label class="form-label">Town</label>
                    <input type="text" formControlName="town" class="form-control form-control-lg" />
                </div>
                <div class="col-md-6 col-sm-12">
                    <label class="form-label">District</label>
                    <input type="text" formControlName="district" class="form-control form-control-lg" />
                </div>
                <div class="col-md-6 col-sm-12">
                    <label class="form-label">License Officer</label>
                    <input type="text" formControlName="license_officer" class="form-control form-control-lg" />
                </div>
                <div class="col-md-6 col-sm-12">
                    <label class="form-label">Designation</label>
                    <input type="text" formControlName="designation" class="form-control form-control-lg" />
                </div>
                <div class="col-md-6 col-sm-12">
                    <label class="form-label">License Date</label>
                    <input type="date" formControlName="license_date" class="form-control form-control-lg" />
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="close()">
            Close
        </button>
        <button type="button" class="btn btn-primary" [disabled]="Imamform.invalid"
            (click)="editData ? update() : store()">
            <span [ngClass]="{ 'spinner-border': isLoading }" style="font-size: 10px; height: 20px; width: 20px"
                role="status">
            </span>
            {{ editData ? " Update " : "Save changes" }}
        </button>
    </div>
</ng-template>